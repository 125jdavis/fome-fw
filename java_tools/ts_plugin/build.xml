<project default="jar">
    <property name="jar_file_folder" value="build/jar"/>
    <property name="jar_file" value="${jar_file_folder}/rusefi_plugin.jar"/>

    <target name="clean">
        <delete dir="build"/>
    </target>

    <target name="compile">
        <mkdir dir="build/classes"/>
    </target>

    <target name="jar" depends="compile">
        <mkdir dir="${jar_file_folder}"/>
        <delete file="${jar_file}"/>

        <tstamp>
            <format property="TODAY" pattern="yyyy-MM-dd HH:mm:ss"/>
        </tstamp>


        <jar destfile="${jar_file}" basedir="build/classes">
            <manifest>
                <attribute name="Main-Class" value="com.rusefi.Launcher"/>
                <attribute name="Built-Date" value="${TODAY}"/>
                <attribute name="Signature-Vendor" value="rusEFI LLC"/>
                <attribute name="ApplicationPlugin" value="com.rusefi.TsPlugin"/>
            </manifest>

            <zipfileset src="../../java_console/lib/httpclient.jar" includes="**/*.class"/>
            <zipfileset src="../../java_console/lib/httpcore.jar" includes="**/*.class"/>
            <zipfileset src="../../java_console/lib/httpmime.jar" includes="**/*.class"/>

        </jar>


    </target>

</project>